@model Services.ViewModels.Physician.CreateInvoice

@{
    DateOnly date = Model.StartDate;
    int totaldays = date.Day < 15 ? 14 : DateTime.DaysInMonth(date.Year, date.Month) - 14;
}

<form asp-controller="Physician" asp-action="CreateInvoice" enctype="multipart/form-data" id="invoiceForm">
    <input asp-for="StartDate" type="date" class="d-none" value="@Model.StartDate.ToString("yyyy-MM-dd")" />
    <div class="table-responsive">
        <table class="table">
            <thead>
                <tr>
                    <th class="bg-transparent col-2">
                        Date
                    </th>
                    <th class="bg-transparent col-1">
                        On-Call Hours
                    </th>
                    <th class="bg-transparent col-2">
                        Total Hours
                    </th>
                    <th class="bg-transparent col-1">
                        Weekend / Holiday
                    </th>
                    <th class="bg-transparent col-3">
                        Number Of HouseCall
                    </th>
                    <th class="bg-transparent col-3">
                        Number of Phone Consults
                    </th>
                </tr>
            </thead>
            <tbody>
                @for (int i = 1; i <= totaldays; i++)
                {
                    <tr class="align-middle bg-white">
                        <td>
                            @date.ToString("MM/dd/yyyy")
                        </td>
                        @if (@Model.ShiftHours.ContainsKey(i))
                        {
                            <td>
                                @Model.ShiftHours[i]
                            </td>
                            <td>
                                <input name="TotalHours" class="w-75" value="@Model.TotalHours[i - 1]" type="number" step="0.01" min="0" max="24" />
                            </td>
                        }
                        else
                        {
                            <td>
                                0
                            </td>
                            <td>
                                <input name="TotalHours" class="w-75" value="@Model.TotalHours[i - 1]" type="number" step="0.01" min="0" max="24" />
                            </td>
                        }
                        <td>
                            <input name="IsHoliday" class="w-75 h-100" type="checkbox" value="@date.Day" checked="@Model.IsHoliday.Contains(i)" />
                        </td>
                        <td>
                            <input name="NoOfHouseCall" class="w-75" value="@Model.NoOfHouseCall[i - 1]" type="number" step="0.01" min="0" max="50" />
                        </td>
                        <td>
                            <input name="NoOfPhoneConsults" class="w-75" value="@Model.NoOfPhoneConsults[i - 1]" type="number" step="0.01" min="0" max="50" />
                        </td>
                    </tr>
                    date = date.AddDays(1);
                }
            </tbody>
        </table>
    </div>
    <div id="receipts">
        <button class="bg-white fw-bold px-2 receipts" type="button">
            Add Receipts
        </button>
    </div>
    <div class="d-flex justify-content-end">
        <button class="bg-white fw-bold px-2 me-2" type="submit">
            submit
        </button>
        <button class="bg-white fw-bold px-2" type="submit" asp-controller="Physician" asp-action="FinalizeInvoice">
            Finalize
        </button>
    </div>
</form>